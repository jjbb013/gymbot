# GymBot 功能验证测试清单

本文档旨在帮助您系统地测试 GymBot 的所有功能, 确保每一部分都按预期工作. 

**重要前置准备:**
1.  确保 `bot.py` 中的 `TELEGRAM_BOT_TOKEN` 已替换为您自己的 Token.
2.  确保 `bot.py` 中的 `ADMIN_USER_IDS` 列表中已添加了您自己的 Telegram User ID.
3.  通过 `python3 bot.py` 启动机器人.

---

## 1. 核心训练记录功能

| 测试场景 | 操作步骤 | 预期结果 |
| :--- | :--- | :--- |
| **1.1. 完整记录** | 在群组中发送: `杠铃卧推 80kg 10` | 机器人回复“记录成功”, 并显示正确的项目、重量和次数. |
| **1.2. 上下文-重量次数** | 紧接着发送: `85kg 8` | 机器人回复“记录成功”, 项目应为“杠铃卧推”, 重量和次数为新的值. |
| **1.3. 上下文-仅次数** | 紧接着发送: `6` | 机器人回复“记录成功”, 项目和重量应沿用上一条, 次数为 6. |
| **1.4. 负数重量记录** | 发送: `助力引体向上 -30kg 10` | 机器人回复“记录成功”, 重量应显示为 -30kg. |
| **1.5. 错误格式** | 发送: `深蹲 100 kg` (kg前有空格) | 机器人不应回复, 或提示格式错误. |
| **1.6. 无上下文发送** | (重启机器人后) 直接发送: `100kg 10` | 机器人提示“请先发送一条包含项目名称的完整记录”. |

---

## 2. 核心身体数据记录

| 测试场景 | 操作步骤 | 预期结果 |
| :--- | :--- | :--- |
| **2.1. 记录体重** | 发送: `体重 75` 或 `体重 75kg` | 机器人回复“身体数据记录成功: 体重 = 75.0 kg”. |
| **2.2. 记录体脂率** | 发送: `体脂率 15%` 或 `体脂率 15` | 机器人回复“身体数据记录成功: 体脂率 = 15.0 %”. |
| **2.3. 记录未知指标** | 发送: `心情 100` | 机器人无响应 (因为“心情”不是预设指标). |

---

## 3. 通用指令

| 测试场景 | 操作步骤 | 预期结果 |
| :--- | :--- | :--- |
| **3.1. 帮助命令** | 发送: `/help` | 机器人回复详细的指令列表. |
| **3.2. 训练总结** | 发送: `/summary` | 机器人回复本周的训练总结报告. |
| **3.3. 删除上一条** | 1. 发送 `硬拉 120kg 5` <br> 2. 发送 `/delete_last` | 1. 机器人回复记录成功. <br> 2. 机器人回复“已成功删除您的上一条训练记录”. |
| **3.4. 重复删除** | 紧接着再次发送: `/delete_last` | 机器人提示没有找到可以删除的记录. |
| **3.5. PR 提醒** | 1. 发送 `深蹲 100kg 5` <br> 2. 发送 `深蹲 105kg 3` | 第二次发送后, 机器人除了回复“记录成功”外, 还会额外发送一条“新纪录诞生!”的消息. |

---

## 4. 图表功能

| 测试场景 | 操作步骤 | 预期结果 |
| :--- | :--- | :--- |
| **4.1. 训练图表** | (在有“卧推”数据后) 发送: `/my_stats 杠铃卧推` | 机器人回复一张图片, 图表标题为“杠铃卧推 负重趋势”. |
| **4.2. 身体图表** | (在有“体重”数据后) 发送: `/my_body_stats 体重` | 机器人回复一张图片, 图表标题为“体重 变化趋势”. |
| **4.3. 查询不存在数据**| 发送: `/my_stats 跳绳` | 机器人提示找不到相关记录. |

---

## 5. 管理员指令

**前提: 确保您的 User ID 在 `ADMIN_USER_IDS` 列表中.**

| 测试场景 | 操作步骤 | 预期结果 |
| :--- | :--- | :--- |
| **5.1. 列出指标** | 发送: `/list_metrics` | 机器人回复包含“体重”和“体脂率”的列表. |
| **5.2. 添加新指标** | 发送: `/add_metric 臂围 cm` | 机器人回复“已成功添加新的身体指标: 臂围 (cm)”. |
| **5.3. 验证新指标** | 1. 再次发送 `/list_metrics` <br> 2. 发送 `臂围 40cm` | 1. 新列表中应包含“臂围”. <br> 2. 机器人回复“身体数据记录成功: 臂围 = 40.0 cm”. |
| **5.4. 删除指标** | 发送: `/delete_metric 臂围` | 机器人回复“已成功删除指标: 臂围”. |
| **5.5. 验证删除** | 1. 再次发送 `/list_metrics` <br> 2. 发送 `臂围 40cm` | 1. 列表中不再有“臂围”. <br> 2. 机器人无响应. |
| **5.6. 非管理员尝试**| (请朋友)发送: `/add_metric 测试 a` | 机器人回复“抱歉,只有管理员才能使用此命令.”. |

